{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ushit%20sharma/test/CLC/clc%20next/my-project/src/lib/sanity.ts"],"sourcesContent":["import { createClient } from '@sanity/client'\r\nimport { createImageUrlBuilder } from '@sanity/image-url'\r\n\r\n// Create client with fallback for custom domain CORS issues\r\nexport const client = createClient({\r\n  projectId: 'k9qzu7ux',\r\n  dataset: 'production',\r\n  useCdn: true,\r\n  apiVersion: '2024-01-01',\r\n  perspective: 'published',\r\n  stega: { enabled: false },\r\n  timeout: 30000,\r\n  withCredentials: false\r\n})\r\n\r\n// Fallback client without CDN\r\nexport const clientNoCdn = createClient({\r\n  projectId: 'k9qzu7ux',\r\n  dataset: 'production',\r\n  useCdn: false,\r\n  apiVersion: '2024-01-01',\r\n  perspective: 'published',\r\n  timeout: 30000\r\n})\r\n\r\n// FIXED URL builder\r\nconst builder = createImageUrlBuilder(client)\r\n\r\nexport function urlFor(source: any) {\r\n  return builder.image(source)\r\n}\r\n\r\n// Fetch with fallback\r\nexport async function fetchWithFallback<T>(\r\n  query: string,\r\n  params: Record<string, any> = {}\r\n): Promise<T> {\r\n  try {\r\n    return await client.fetch<T>(query, params)\r\n  } catch (error: any) {\r\n    if (\r\n      error?.message?.includes('CORS') ||\r\n      error?.message?.includes('Network') ||\r\n      error?.statusCode === 0\r\n    ) {\r\n      return await clientNoCdn.fetch<T>(query, params)\r\n    }\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const queries = {\r\n  getAllBlogPosts: `*[_type == \"blogPost\"] | order(publishedAt desc) {\r\n    _id, title, slug, excerpt, publishedAt, readTime, isNew,\r\n    featuredImage, downloadUrl,\r\n    category->{ name, slug, color }\r\n  }`,\r\n\r\n  getBlogPostBySlug: `*[_type == \"blogPost\" && slug.current == $slug][0] {\r\n    _id, title, slug, excerpt, content, publishedAt, readTime, isNew,\r\n    featuredImage, downloadUrl,\r\n    category->{ name, slug, color },\r\n    seo\r\n  }`,\r\n\r\n  getAllNewsUpdates: `*[_type == \"newsUpdate\"] | order(publishedAt desc) {\r\n    _id, title, slug, excerpt, type, publishedAt, readTime, isNew,\r\n    featuredImage, downloadUrl\r\n  }`,\r\n\r\n  getNewsUpdateBySlug: `*[_type == \"newsUpdate\" && slug.current == $slug][0] {\r\n    _id, title, slug, excerpt, content, type, publishedAt, readTime, isNew,\r\n    featuredImage, downloadUrl, seo\r\n  }`,\r\n\r\n  getAllCategories: `*[_type == \"category\"] | order(name asc) {\r\n    _id, name, slug, description, color\r\n  }`,\r\n\r\n  getFeaturedBlogPosts: `*[_type == \"blogPost\"] | order(publishedAt desc)[0...4] {\r\n    _id, title, slug, excerpt, publishedAt,\r\n    featuredImage,\r\n    category->{ name, slug, color }\r\n  }`,\r\n\r\n  getFeaturedNewsUpdates: `*[_type == \"newsUpdate\"] | order(publishedAt desc)[0...3] {\r\n    _id, title, slug, type, publishedAt\r\n  }`,\r\n\r\n  searchArticles: `*[_type in [\"blogPost\", \"newsUpdate\"] && (title match $query || excerpt match $query)]\r\n    | order(publishedAt desc)[0...10] {\r\n    _id, _type, title, slug, excerpt, publishedAt, type,\r\n    category->{ name }\r\n  }`,\r\n\r\n  getCareerOpenings: `*[_type == \"careerOpening\" && isActive == true]\r\n    | order(sortOrder asc, _createdAt desc) {\r\n    _id, title, location, type, experience, requirements,\r\n    sortOrder, isActive\r\n  }`\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAGO,MAAM,SAAS,IAAA,8LAAY,EAAC;IACjC,WAAW;IACX,SAAS;IACT,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,OAAO;QAAE,SAAS;IAAM;IACxB,SAAS;IACT,iBAAiB;AACnB;AAGO,MAAM,cAAc,IAAA,8LAAY,EAAC;IACtC,WAAW;IACX,SAAS;IACT,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,SAAS;AACX;AAEA,oBAAoB;AACpB,MAAM,UAAU,IAAA,kMAAqB,EAAC;AAE/B,SAAS,OAAO,MAAW;IAChC,OAAO,QAAQ,KAAK,CAAC;AACvB;AAGO,eAAe,kBACpB,KAAa,EACb,SAA8B,CAAC,CAAC;IAEhC,IAAI;QACF,OAAO,MAAM,OAAO,KAAK,CAAI,OAAO;IACtC,EAAE,OAAO,OAAY;QACnB,IACE,OAAO,SAAS,SAAS,WACzB,OAAO,SAAS,SAAS,cACzB,OAAO,eAAe,GACtB;YACA,OAAO,MAAM,YAAY,KAAK,CAAI,OAAO;QAC3C;QACA,MAAM;IACR;AACF;AAEO,MAAM,UAAU;IACrB,iBAAiB,CAAC;;;;GAIjB,CAAC;IAEF,mBAAmB,CAAC;;;;;GAKnB,CAAC;IAEF,mBAAmB,CAAC;;;GAGnB,CAAC;IAEF,qBAAqB,CAAC;;;GAGrB,CAAC;IAEF,kBAAkB,CAAC;;GAElB,CAAC;IAEF,sBAAsB,CAAC;;;;GAItB,CAAC;IAEF,wBAAwB,CAAC;;GAExB,CAAC;IAEF,gBAAgB,CAAC;;;;GAIhB,CAAC;IAEF,mBAAmB,CAAC;;;;GAInB,CAAC;AACJ"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ushit%20sharma/test/CLC/clc%20next/my-project/src/app/blog/%5Bslug%5D/page.tsx"],"sourcesContent":["import { notFound } from \"next/navigation\";\r\nimport { client } from \"@/lib/sanity\";\r\nimport { urlFor } from \"@/lib/sanity\";\r\nimport { SanityContentRenderer } from \"@/lib/sanityContent\";\r\nimport Header from \"@/components/Header\";\r\nimport LeftSidebar from \"@/components/LeftSidebar\";\r\nimport RightSidebar from \"@/components/RightSidebar\";\r\nimport Footer from \"@/components/Footer\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, Eye } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\n\r\n// -----------------------------------------------------------\r\n// Fetch Single Blog Post by Slug\r\n// -----------------------------------------------------------\r\n// async function getBlogPost(slug: string) {\r\n//   if (!slug) return null;\r\n\r\n//   const query = `\r\n//     *[_type == \"blogPost\" && slug.current == $slug][0]{\r\n//       title,\r\n//       excerpt,\r\n//       content,\r\n//       featuredImage,\r\n//       publishedAt,\r\n//       category->{name},\r\n//       seo,\r\n//       slug,\r\n//       downloadUrl\r\n//     }\r\n//   `;\r\n\r\n//   return await client.fetch(query, { slug });\r\n// }\r\nexport async function getBlogPostDebug(slug: string) {\r\n  console.log(\"[getBlogPostDebug] called with slug:\", slug);\r\n\r\n  if (!slug) {\r\n    console.log(\"[getBlogPostDebug] no slug provided -> returning null\");\r\n    return null;\r\n  }\r\n\r\n  const query = `\r\n    *[_type == \"blogPost\" && slug.current == $slug][0]{\r\n      title,\r\n      excerpt,\r\n      content,\r\n      featuredImage,\r\n      publishedAt,\r\n      category->{name},\r\n      seo,\r\n      slug,\r\n      downloadUrl\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const res = await client.fetch(query, { slug });\r\n    console.log(\"[getBlogPostDebug] Sanity response:\", !!res, res && { title: res.title, slug: res.slug });\r\n    return res;\r\n  } catch (err: any) {\r\n    // Print useful error details (Sanity client provides response)\r\n    console.error(\"[getBlogPostDebug] fetch error:\", err?.message || err);\r\n    if (err?.response) {\r\n      try {\r\n        console.error(\"[getBlogPostDebug] error.response body:\", err.response.body || err.response);\r\n      } catch (e) {}\r\n    }\r\n    throw err;\r\n  }\r\n}\r\n\r\n// -----------------------------------------------------------\r\n// Dynamic Metadata\r\n// -----------------------------------------------------------\r\n// export async function generateMetadata({ params }: { params: { slug: string } }) {\r\n//   const blogPost = await getBlogPost(params.slug);\r\n//   if (!blogPost) return {};\r\n\r\n//   const title = blogPost.seo?.metaTitle || blogPost.title;\r\n//   const description =\r\n//     blogPost.seo?.metaDescription ||\r\n//     blogPost.excerpt ||\r\n//     `Read ${blogPost.title} - Legal insights from Commercial Law Chamber`;\r\n\r\n//   const canonical = `https://www.clclaw.in/blog/${params.slug}`;\r\n\r\n//   const ogImage = blogPost.featuredImage\r\n//     ? urlFor(blogPost.featuredImage).width(1200).height(630).url()\r\n//     : \"https://www.clclaw.in/clc-logo.png\";\r\n\r\n//   return {\r\n//     title: `${title} | Commercial Law Chamber`,\r\n//     description,\r\n//     alternates: { canonical },\r\n//     openGraph: {\r\n//       title,\r\n//       description,\r\n//       url: canonical,\r\n//       images: [ogImage],\r\n//       type: \"article\",\r\n//     },\r\n//     twitter: {\r\n//       card: \"summary_large_image\",\r\n//       title,\r\n//       description,\r\n//       images: [ogImage],\r\n//     },\r\n//   };\r\n// }\r\n\r\n// -----------------------------------------------------------\r\n// PAGE COMPONENT\r\n// -----------------------------------------------------------\r\n// export default async function BlogPage({ params }: { params: { slug: string } }) {\r\n//   const blogPost = await getBlogPost(params.slug);\r\n\r\n//   if (!blogPost) return notFound();\r\n\r\n//   const publishedDate = blogPost.publishedAt\r\n//     ? new Date(blogPost.publishedAt)\r\n//     : new Date();\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen\">\r\n//       <div className=\"max-w-7xl bg-slate-900/40 mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n\r\n//         <Header />\r\n\r\n//         <div className=\"flex flex-col lg:flex-row gap-4\">\r\n//           {/* Left Sidebar */}\r\n//           <div className=\"hidden lg:block lg:w-48 xl:w-52\">\r\n//             <LeftSidebar activeSection=\"insights\" />\r\n//           </div>\r\n\r\n//           {/* Main Content */}\r\n//           <div className=\"flex-1 min-w-0\">\r\n//             <article className=\"bg-white/95 backdrop-blur-sm p-8 rounded-lg shadow-sm\">\r\n\r\n//               <div className=\"max-w-4xl mx-auto\">\r\n\r\n//                 {/* Back Button */}\r\n//                 <div className=\"mb-6\">\r\n//                   <Link\r\n//                     href=\"/insights\"\r\n//                     className=\"flex items-center gap-2 text-gray-600 hover:text-gray-800\"\r\n//                   >\r\n//                     <ArrowLeft className=\"h-4 w-4\" />\r\n//                     Back to Insights\r\n//                   </Link>\r\n//                 </div>\r\n\r\n//                 {/* Title */}\r\n//                 <h1 className=\"text-3xl lg:text-4xl font-bold poppins text-[#163C0F] mb-6\">\r\n//                   {blogPost.title}\r\n//                 </h1>\r\n\r\n//                 {/* Category */}\r\n//                 {blogPost.category?.name && (\r\n//                   <span className=\"inline-block bg-primary/10 text-primary px-3 py-1 rounded-full text-sm font-medium mb-4\">\r\n//                     {blogPost.category.name}\r\n//                   </span>\r\n//                 )}\r\n\r\n//                 {/* Publish Date */}\r\n//                 <time\r\n//                   className=\"text-sm text-gray-600 block mb-5\"\r\n//                   dateTime={publishedDate.toISOString()}\r\n//                 >\r\n//                   {format(publishedDate, \"MMMM d, yyyy\")}\r\n//                 </time>\r\n\r\n//                 {/* Featured Image */}\r\n//                 {blogPost.featuredImage && (\r\n//                   <img\r\n//                     src={urlFor(blogPost.featuredImage).width(800).height(400).url()}\r\n//                     alt={blogPost.title}\r\n//                     className=\"w-full h-auto rounded-lg shadow-md mb-8\"\r\n//                   />\r\n//                 )}\r\n\r\n//                 {/* Body */}\r\n//                 {/* <SanityContentRenderer content={blogPost.content} /> */}\r\n\r\n//                 {/* Download Button */}\r\n//                 {blogPost.downloadUrl && (\r\n//                   <div className=\"mt-8\">\r\n//                     <Link\r\n//                       href={blogPost.downloadUrl}\r\n//                       target=\"_blank\"\r\n//                       className=\"inline-flex items-center gap-2 border px-4 py-2 rounded-md hover:bg-gray-50\"\r\n//                     >\r\n//                       <Eye className=\"h-4 w-4\" />\r\n//                       Read The Full Document Here\r\n//                     </Link>\r\n//                   </div>\r\n//                 )}\r\n\r\n//               </div>\r\n//             </article>\r\n//           </div>\r\n\r\n//           {/* Right Sidebar */}\r\n//           <div className=\"hidden lg:block lg:w-60 xl:w-64\">\r\n//             <RightSidebar />\r\n//           </div>\r\n//         </div>\r\n\r\n//         <Footer />\r\n\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n"],"names":[],"mappings":"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"}}]
}